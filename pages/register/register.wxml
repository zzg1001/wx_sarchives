<!-- register.wxml -->
<view class="page">
  <form bindsubmit="submit" >
  <!-- 主滚动区 -->
  <scroll-view class="main" scroll-y>
    <!-- 证件照 -->
    <view class="photo-card">
      <image class="id-photo" src="{{photo}}" mode="aspectFill" />
      <view class="photo-mask" bindtap="chooseAvatar">
        <text class="iconfont icon-camera"></text>
        <text class="mask-txt">上传证件照</text>
      </view>
    </view>

    <!-- 基础信息 -->
    <view class="card">
      <view class="card-title">基础信息</view>
      <view class="cell required">
        <text class="label"><text class="red-star">*</text>姓名</text>
        <input value="{{form.name}}" bindinput="onInput" data-field="name" placeholder="请输入姓名" />
      </view>
      <picker mode="selector" range="{{sexOptions}}" value="{{sexIndex}}" bindchange="onSexChange">
        <view class="cell required">
          <text class="label"><text class="red-star">*</text>性别</text>
          <text class="value">{{sexOptions[sexIndex]}}</text>
          <text class="iconfont icon-right"></text>
        </view>
      </picker>

      <picker mode="date" fields="month" value="{{form.birth}}" bindchange="onDateChange">
        <view class="cell required">
          <text class="label"><text class="red-star">*</text>出生年月</text>
          <text class="value">{{form.birth || '请选择'}}</text>
          <text class="iconfont icon-right"></text>
        </view>
      </picker>

      <view class="cell">
        <text class="label"><text class="red-star">*</text>手机</text>
        <input type="number" maxlength="11" value="{{form.phone}}" bindinput="onInput" data-field="phone" placeholder="11位手机号" />
      </view>

      <view class="cell">
        <text class="label">单位电话</text>
        <input value="{{form.officePhone}}" bindinput="onInput" data-field="officePhone" placeholder="区号-号码" />
      </view>

      <view class="cell">
        <text class="label">邮箱</text>
        <input type="email" value="{{form.email}}" bindinput="onInput" data-field="email" placeholder="邮箱地址" />
      </view>
    </view>

    <!-- 内部工作与组织 -->
    <view class="card">
      <view class="card-title">工作与组织</view>
      <!-- 选择组织（必填，需审批） -->
      <picker mode="selector" range="{{orgList}}" value="{{orgIndex}}" bindchange="onOrgChange">
        <view class="cell required">
          <text class="label"><text class="red-star">*</text>选择组织</text>
          <text class="value">{{orgList[orgIndex]}}</text>
          <text class="iconfont icon-right"></text>
        </view>
      </picker>

      <!-- 职务/职称（手填） -->
      <view class="cell">
        <text class="label">盟内职务</text>
        <input value="{{form.position}}" bindinput="onInput" data-field="position" placeholder="请填写职务或职称" />
      </view>

      <view class="cell">
        <text class="label">单位名称</text>
        <input value="{{form.organization}}" bindinput="onInput" data-field="organization" placeholder="如：XX公司/机构" />
      </view>

          <!-- 职务/职称（手填） -->
          <view class="cell">
        <text class="label">职务/职称</text>
        <input value="{{form.title}}" bindinput="onInput" data-field="title" placeholder="请填写职务或职称" />
      </view>
    </view>

    <!-- 个人标签 -->
    <view class="card">
      <view class="card-title">个人标签</view>
      <textarea class="textarea" value="{{form.skills}}" bindinput="onInput" data-field="skills" maxlength="100" placeholder="专业特长（100字以内）" />
      <textarea class="textarea" value="{{form.hobbies}}" bindinput="onInput" data-field="hobbies" maxlength="100" placeholder="兴趣爱好（100字以内）" />
    </view>

    <!-- 其他 -->
    <view class="card">
      <view class="card-title">其他</view>
      <textarea class="textarea" value="{{form.other}}" bindinput="onInput" data-field="other" maxlength="200" placeholder="其他需要说明的事项" />
    </view>

    <!-- 底部占位 -->
    <view style="height:160rpx;"></view>
  </scroll-view>

  <!-- 悬浮提交 -->
  <view class="float-footer">
    <button class="btn-submit" formType="submit" disabled="{{canSubmit}}">提交并等待审批</button>
  </view>
  </form>
  <policy-modal bind:agree="handleAgree" bind:disagree="handleDisagree" visible="{{showModal}}"></policy-modal>
</view>